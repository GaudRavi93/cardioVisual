{"version":3,"sources":["../../src/pages/forgotpassword/forgotpassword.module.ts","../../src/pages/forgotpassword/forgotpassword.ts"],"names":[],"mappings":"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","file":"37.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { ForgotpasswordPage } from './forgotpassword';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ForgotpasswordPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(ForgotpasswordPage),\r\n  ],\r\n})\r\nexport class ForgotpasswordPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/forgotpassword/forgotpassword.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, AlertController } from 'ionic-angular';\r\nimport { HttpService } from '../../services/HttpService';\r\nimport { DatabaseProvider } from '../../providers/database/database';\r\nimport * as _ from 'underscore/underscore';\r\nimport { CleverTap } from '@ionic-native/clevertap';\r\n\r\n/**\r\n * Generated class for the ForgotpasswordPage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-forgotpassword',\r\n  templateUrl: 'forgotpassword.html',\r\n})\r\nexport class ForgotpasswordPage {\r\n\r\n  email: string;\r\n  error_msg: string = '';\r\n  type: string = '';\r\n  verification_code: string = '';\r\n  api_verification_code: string = '';\r\n  password: string = '';\r\n  confirm_password: string= '';\r\n    dtStr : any;\r\n  clevertapDate : any;\r\n\r\n  constructor(public navCtrl: NavController, public navParams: NavParams, private httpservice: HttpService, private databaseprovider: DatabaseProvider, public alertCtrl: AlertController, private clevertap: CleverTap) {\r\n\r\n\r\n\r\n    this.dtStr = this.httpservice.dtStr();\r\n    this.clevertapDate = this.httpservice.clevertapDate();\r\n\r\n    this.type = navParams.get('type');\r\n    this.email = navParams.get('email');\r\n\r\n    if(this.type == 'verification_code'){\r\n        this.api_verification_code = navParams.get('verification_code');\r\n    }\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    console.log('ionViewDidLoad ForgotpasswordPage');\r\n  }\r\n\r\n  gotologin(){\r\n  this.navCtrl.setRoot('LoginPage');\r\n  }\r\n\r\n  gotoForgotpasswordPage(){\r\n    this.navCtrl.push('ForgotpasswordPage', {'type':'forgot_password'});\r\n  }\r\n\r\n  forgotPassword() {\r\n    this.error_msg = '';\r\n    if(this.email == \"\"){\r\n      this.error_msg = 'Please enter your email.';\r\n    }else if(this.email != \"\" && !this.validateEmail(this.email)){\r\n      this.error_msg = 'Please enter valid email address.';\r\n    }\r\n    if(this.error_msg == '' && this.email != ''){\r\n\r\n      this.httpservice.checkEmailExistsInCMS(this.email).subscribe(data => {\r\n      if((_.size(data) > 0) && (data[0].verified != 0 && data[0].verified != null)){\r\n            this.httpservice.getVerificationCode(this.email).subscribe(codedata => {\r\n              var params = {\r\n                \"record_time\" : this.dtStr,\r\n                \"record_date\" : this.clevertapDate,\r\n                \"os\" : localStorage.getItem('getDevicePlatform'),\r\n                \"modelNo\" : localStorage.getItem('modelNo'),\r\n                \"deviceversion\" : localStorage.getItem('getDeviceversion'),\r\n                \"inputEmailValue\":this.email\r\n              };\r\n              this.clevertap.recordEventWithNameAndProps(\"clickedOnForgotPassword\", params);\r\n\r\n              this.navCtrl.push('ForgotpasswordPage', {'type':'verification_code', 'email':this.email, 'verification_code': codedata.code });\r\n            });\r\n      } else {\r\n        var confirmPopup = this.alertCtrl.create({\r\n              title: '',\r\n              message: '<h4 style=\"color:#ffffff; text-align:center;\">Please sign up for CardioVisual.</h4>',\r\n              buttons: ['Dismiss']\r\n            });\r\n            confirmPopup.present();\r\n      }\r\n      });\r\n    }\r\n \r\n  }\r\n\r\n  validateEmail(email) {\r\n    var re = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n    return re.test(email);\r\n  }\r\n\r\n  passwordverify(){\r\n    this.error_msg = '';\r\n    if(this.verification_code == ''){\r\n    this.error_msg = 'Please enter valid verification code.';\r\n    }else if(this.verification_code != '' && (this.api_verification_code != this.verification_code)) {\r\n    this.error_msg = 'Verification code and entered code do not match.';\r\n    }else{\r\n    var confirmPopup = this.alertCtrl.create({\r\n          title: '',\r\n          message: '<h4 style=\"color:#ffffff; text-align:center;\">Thank You, Now please create a new Password</h4>',\r\n          buttons: ['Dismiss']\r\n        });\r\n    confirmPopup.present();\r\n    this.navCtrl.push('ForgotpasswordPage',{'type':'change_password', 'email':this.email});\r\n    }\r\n  }\r\n\r\n  changePassword(){\r\n    this.error_msg = '';\r\n    if( this.password == '' || this.password == undefined ){\r\n      this.error_msg = 'Password is required';\r\n    }\r\n    if( this.confirm_password == ''){\r\n      this.error_msg = 'Confirm Password is required';\r\n    }\r\n    if( this.password != this.confirm_password){\r\n      this.error_msg = 'Password and Confirm Password do not match';\r\n    }\r\n\r\n    if(this.error_msg == '' && this.password != '' && this.confirm_password != ''){\r\n\r\n      this.httpservice.checkEmailExistsInCMS(this.email).subscribe(data => {\r\n\r\n      if(_.size(data) > 0){\r\n      this.databaseprovider.updatePassword(this.password, data[0].id);\r\n\r\n      var confirmPopup = this.alertCtrl.create({\r\n      title: '',\r\n      message: '<h4 style=\"color:#ffffff; text-align:center;\">Password changed successfully. Please login to continue.</h4>',\r\n      buttons: ['Dismiss']\r\n      });\r\n      confirmPopup.present();\r\n\r\n      this.navCtrl.setRoot('LoginPage');\r\n      } else {      \r\n      var confirmPopup = this.alertCtrl.create({\r\n      title: '',\r\n      message: '<h4 style=\"color:#ffffff; text-align:center;\">Please sign up for CardioVisual.</h4>',\r\n      buttons: ['Dismiss']\r\n      });\r\n      confirmPopup.present();\r\n      }\r\n      });\r\n\r\n    }\r\n  }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/forgotpassword/forgotpassword.ts"],"sourceRoot":""}