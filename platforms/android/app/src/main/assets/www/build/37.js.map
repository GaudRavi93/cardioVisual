{"version":3,"sources":["../../src/pages/forgotpassword/forgotpassword.module.ts","../../src/pages/forgotpassword/forgotpassword.ts"],"names":[],"mappings":"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","file":"37.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ForgotpasswordPage } from './forgotpassword';\n\n@NgModule({\n  declarations: [\n    ForgotpasswordPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ForgotpasswordPage),\n  ],\n})\nexport class ForgotpasswordPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/forgotpassword/forgotpassword.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, AlertController } from 'ionic-angular';\nimport { HttpService } from '../../services/HttpService';\nimport { DatabaseProvider } from '../../providers/database/database';\nimport * as _ from 'underscore/underscore';\nimport { CleverTap } from '@ionic-native/clevertap';\n\n/**\n * Generated class for the ForgotpasswordPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-forgotpassword',\n  templateUrl: 'forgotpassword.html',\n})\nexport class ForgotpasswordPage {\n\n  email: string;\n  error_msg: string = '';\n  type: string = '';\n  verification_code: string = '';\n  api_verification_code: string = '';\n  password: string = '';\n  confirm_password: string= '';\n    dtStr : any;\n  clevertapDate : any;\n\n  constructor(public navCtrl: NavController, public navParams: NavParams, private httpservice: HttpService, private databaseprovider: DatabaseProvider, public alertCtrl: AlertController, private clevertap: CleverTap) {\n\n\n\n    this.dtStr = this.httpservice.dtStr();\n    this.clevertapDate = this.httpservice.clevertapDate();\n\n    this.type = navParams.get('type');\n    this.email = navParams.get('email');\n\n    if(this.type == 'verification_code'){\n        this.api_verification_code = navParams.get('verification_code');\n    }\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad ForgotpasswordPage');\n  }\n\n  gotologin(){\n  this.navCtrl.setRoot('LoginPage');\n  }\n\n  gotoForgotpasswordPage(){\n    this.navCtrl.push('ForgotpasswordPage', {'type':'forgot_password'});\n  }\n\n  forgotPassword() {\n    this.error_msg = '';\n    if(this.email == \"\"){\n      this.error_msg = 'Please enter your email.';\n    }else if(this.email != \"\" && !this.validateEmail(this.email)){\n      this.error_msg = 'Please enter valid email address.';\n    }\n    if(this.error_msg == '' && this.email != ''){\n\n      this.httpservice.checkEmailExistsInCMS(this.email).subscribe(data => {\n      if((_.size(data) > 0) && (data[0].verified != 0 && data[0].verified != null)){\n            this.httpservice.getVerificationCode(this.email).subscribe(codedata => {\n              var params = {\n                \"record_time\" : this.dtStr,\n                \"record_date\" : this.clevertapDate,\n                \"os\" : localStorage.getItem('getDevicePlatform'),\n                \"modelNo\" : localStorage.getItem('modelNo'),\n                \"deviceversion\" : localStorage.getItem('getDeviceversion'),\n                \"inputEmailValue\":this.email\n              };\n              this.clevertap.recordEventWithNameAndProps(\"clickedOnForgotPassword\", params);\n\n              this.navCtrl.push('ForgotpasswordPage', {'type':'verification_code', 'email':this.email, 'verification_code': codedata.code });\n            });\n      } else {\n        var confirmPopup = this.alertCtrl.create({\n              title: '',\n              message: '<h4 style=\"color:#ffffff; text-align:center;\">Please sign up for CardioVisual.</h4>',\n              buttons: ['Dismiss']\n            });\n            confirmPopup.present();\n      }\n      });\n    }\n \n  }\n\n  validateEmail(email) {\n    var re = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    return re.test(email);\n  }\n\n  passwordverify(){\n    this.error_msg = '';\n    if(this.verification_code == ''){\n    this.error_msg = 'Please enter valid verification code.';\n    }else if(this.verification_code != '' && (this.api_verification_code != this.verification_code)) {\n    this.error_msg = 'Verification code and entered code do not match.';\n    }else{\n    var confirmPopup = this.alertCtrl.create({\n          title: '',\n          message: '<h4 style=\"color:#ffffff; text-align:center;\">Thank You, Now please create a new Password</h4>',\n          buttons: ['Dismiss']\n        });\n    confirmPopup.present();\n    this.navCtrl.push('ForgotpasswordPage',{'type':'change_password', 'email':this.email});\n    }\n  }\n\n  changePassword(){\n    this.error_msg = '';\n    if( this.password == '' || this.password == undefined ){\n      this.error_msg = 'Password is required';\n    }\n    if( this.confirm_password == ''){\n      this.error_msg = 'Confirm Password is required';\n    }\n    if( this.password != this.confirm_password){\n      this.error_msg = 'Password and Confirm Password do not match';\n    }\n\n    if(this.error_msg == '' && this.password != '' && this.confirm_password != ''){\n\n      this.httpservice.checkEmailExistsInCMS(this.email).subscribe(data => {\n\n      if(_.size(data) > 0){\n      this.databaseprovider.updatePassword(this.password, data[0].id);\n\n      var confirmPopup = this.alertCtrl.create({\n      title: '',\n      message: '<h4 style=\"color:#ffffff; text-align:center;\">Password changed successfully. Please login to continue.</h4>',\n      buttons: ['Dismiss']\n      });\n      confirmPopup.present();\n\n      this.navCtrl.setRoot('LoginPage');\n      } else {      \n      var confirmPopup = this.alertCtrl.create({\n      title: '',\n      message: '<h4 style=\"color:#ffffff; text-align:center;\">Please sign up for CardioVisual.</h4>',\n      buttons: ['Dismiss']\n      });\n      confirmPopup.present();\n      }\n      });\n\n    }\n  }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/forgotpassword/forgotpassword.ts"],"sourceRoot":""}